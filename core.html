<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<title>GTA3script Specification</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<style>
/* Little customization on the asciidoctor stylesheet */
#header, #content, #footer, #footnotes {
  max-width: 51em;
}
.sect1 + .sect1 {
  border-top: none;
}
h1, h2, h3, h4, h5, h6 {
  color: #111;
  font-weight: normal;
  margin-top: 2em;
  margin-bottom: 1em;
}
#content #toc {
  background: none;
}
.literalblock pre, .listingblock pre:not(.highlight),
.listingblock pre[class="highlight"], .listingblock pre[class^="highlight "],
.listingblock pre.CodeRay, .listingblock pre.prettyprint {
  background: none;
}
pre {
  color: #000000;
}
:not(pre) > code {
  background-color: inherit;
  padding: 0 0;
}
code {
  color: #000000;
}
p {
  line-height: 1.7;
}
ol>li p, ul>li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist {
  margin-bottom: 0;
}
</style>
</head>
<body class="article">
<div id="header">
<h1>GTA3script Specification</h1>
<div class="details">
<span id="revdate">2018-12-01</span>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This is a draft. It may be wrong, incomplete and subject to change.
</td>
</tr>
</table>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#scope">1. Scope</a></li>
<li><a href="#terms-and-definitions">2. Terms and Definitions</a></li>
<li><a href="#general-principles">3. General Principles</a>
<ul class="sectlevel2">
<li><a href="#implementation-conformance">3.1. Implementation Conformance</a></li>
<li><a href="#structure-of-this-document">3.2. Structure of this Document</a></li>
<li><a href="#syntax-notation">3.3. Syntax Notation</a></li>
</ul>
</li>
<li><a href="#concepts">4. Concepts</a>
<ul class="sectlevel2">
<li><a href="#concept-scripts">4.1. Scripts</a></li>
<li><a href="#concept-script-files">4.2. Script Files</a></li>
<li><a href="#concept-types">4.3. Types</a></li>
</ul>
</li>
<li><a href="#elements">5. Elements</a>
<ul class="sectlevel2">
<li><a href="#element-source-code">5.1. Source Code</a></li>
<li><a href="#element-comment">5.2. Comments</a></li>
<li><a href="#element-command">5.3. Commands</a>
<ul class="sectlevel3">
<li><a href="#element-integer-literal">5.3.1. Integer Literals</a></li>
<li><a href="#element-floating-point-literal">5.3.2. Floating-Point Literals</a></li>
<li><a href="#element-identifier">5.3.3. Identifiers</a></li>
<li><a href="#element-string-literal">5.3.4. String Literals</a></li>
<li><a href="#element-variable-reference">5.3.5. Variable References</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#parameters">6. Parameters</a>
<ul class="sectlevel2">
<li><a href="#string-constants">6.1. String Constants</a></li>
<li><a href="#entities">6.2. Entities</a></li>
<li><a href="#parameter-types">6.3. Parameter Types</a>
<ul class="sectlevel3">
<li><a href="#parameter-type-int">6.3.1. INT</a></li>
<li><a href="#parameter-type-float">6.3.2. FLOAT</a></li>
<li><a href="#parameter-type-var-int">6.3.3. VAR_INT</a></li>
<li><a href="#parameter-type-var-float">6.3.4. VAR_FLOAT</a></li>
<li><a href="#parameter-type-lvar-int">6.3.5. LVAR_INT</a></li>
<li><a href="#parameter-type-lvar-float">6.3.6. LVAR_FLOAT</a></li>
<li><a href="#parameter-type-input-int">6.3.7. INPUT_INT</a></li>
<li><a href="#parameter-type-input-float">6.3.8. INPUT_FLOAT</a></li>
<li><a href="#parameter-type-output-int">6.3.9. OUTPUT_INT</a></li>
<li><a href="#parameter-type-output-float">6.3.10. OUTPUT_FLOAT</a></li>
<li><a href="#parameter-type-label">6.3.11. LABEL</a></li>
<li><a href="#parameter-type-text-label">6.3.12. TEXT_LABEL</a></li>
<li><a href="#parameter-type-var-text-label">6.3.13. VAR_TEXT_LABEL</a></li>
<li><a href="#parameter-type-lvar-text-label">6.3.14. LVAR_TEXT_LABEL</a></li>
<li><a href="#parameter-type-string">6.3.15. STRING</a></li>
<li><a href="#parameter-type-optional">6.3.16. Optional Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#alternators">7. Command Selectors</a></li>
<li><a href="#expressions">8. Expressions</a>
<ul class="sectlevel2">
<li><a href="#assignment-expressions">8.1. Assignment Expressions</a></li>
<li><a href="#conditional-expressions">8.2. Conditional Expressions</a></li>
</ul>
</li>
<li><a href="#statements">9. Statements</a>
<ul class="sectlevel2">
<li><a href="#statement-labeled">9.1. Labeled Statements</a></li>
<li><a href="#statement-empty">9.2. Empty Statements</a></li>
<li><a href="#statement-embedded">9.3. Embedded Statements</a></li>
<li><a href="#statement-command">9.4. Command Statements</a></li>
<li><a href="#statement-expression">9.5. Expression Statements</a></li>
<li><a href="#statement-scope">9.6. Scope Statements</a></li>
<li><a href="#statement-variable-declaration">9.7. Variable Declaration Statements</a></li>
<li><a href="#statement-conditional">9.8. Conditional Statements</a></li>
<li><a href="#statement-selection">9.9. Selection Statements</a>
<ul class="sectlevel3">
<li><a href="#statement-if">9.9.1. IF Statement</a></li>
<li><a href="#statement-ifnot">9.9.2. IFNOT Statement</a></li>
<li><a href="#statement-if-goto">9.9.3. IF GOTO Statement</a></li>
<li><a href="#statement-ifnot-goto">9.9.4. IFNOT GOTO Statement</a></li>
</ul>
</li>
<li><a href="#statement-iteration">9.10. Iteration Statements</a>
<ul class="sectlevel3">
<li><a href="#statement-while">9.10.1. WHILE Statement</a></li>
<li><a href="#statement-whilenot">9.10.2. WHILENOT Statement</a></li>
<li><a href="#statement-repeat">9.10.3. REPEAT Statement</a></li>
</ul>
</li>
<li><a href="#statement-require">9.11. Require Statements</a>
<ul class="sectlevel3">
<li><a href="#statement-gosub-file">9.11.1. GOSUB_FILE Statement</a></li>
<li><a href="#statement-launch-mission">9.11.2. LAUNCH_MISSION Statement</a></li>
<li><a href="#statement-load-and-launch-mission">9.11.3. LOAD_AND_LAUNCH_MISSION Statement</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#script-file-structure">10. Script File Structure</a>
<ul class="sectlevel2">
<li><a href="#script-file-structure-main">10.1. Main Script Files</a></li>
<li><a href="#script-file-structure-main-extension">10.2. Main Extension Files</a></li>
<li><a href="#script-file-structure-subscript">10.3. Subscript Files</a></li>
<li><a href="#script-file-structure-mission">10.4. Mission Script Files</a></li>
</ul>
</li>
<li><a href="#command-def">11. Supporting Commands</a>
<ul class="sectlevel2">
<li><a href="#command-def-wait">11.1. WAIT</a></li>
<li><a href="#command-def-goto">11.2. GOTO</a></li>
<li><a href="#command-def-gosub">11.3. GOSUB</a></li>
<li><a href="#command-def-return">11.4. RETURN</a></li>
<li><a href="#command-def-return-true">11.5. RETURN_TRUE</a></li>
<li><a href="#command-def-return-false">11.6. RETURN_FALSE</a></li>
<li><a href="#command-def-script-name">11.7. SCRIPT_NAME</a></li>
<li><a href="#command-def-terminate-this-script">11.8. TERMINATE_THIS_SCRIPT</a></li>
<li><a href="#command-def-start-new-script">11.9. START_NEW_SCRIPT</a></li>
</ul>
</li>
<li><a href="#alternator-def">12. Supporting Command Selectors</a>
<ul class="sectlevel2">
<li><a href="#alternator-def-set">12.1. SET</a></li>
<li><a href="#alternator-def-cset">12.2. CSET</a></li>
<li><a href="#alternator-def-add-thing-to-thing">12.3. ADD_THING_TO_THING</a></li>
<li><a href="#alternator-def-sub-thing-from-thing">12.4. SUB_THING_FROM_THING</a></li>
<li><a href="#alternator-def-mult-thing-by-thing">12.5. MULT_THING_BY_THING</a></li>
<li><a href="#alternator-def-div-thing-by-thing">12.6. DIV_THING_BY_THING</a></li>
<li><a href="#alternator-def-abs">12.7. ABS</a></li>
<li><a href="#alternator-def-add-thing-to-thing-timed">12.8. ADD_THING_TO_THING_TIMED</a></li>
<li><a href="#alternator-def-sub-thing-from-thing-timed">12.9. SUB_THING_FROM_THING_TIMED</a></li>
<li><a href="#alternator-def-is-thing-equal-to-thing">12.10. IS_THING_EQUAL_TO_THING</a></li>
<li><a href="#alternator-def-is-thing-greater-than-thing">12.11. IS_THING_GREATER_THAN_THING</a></li>
<li><a href="#alternator-def-is-thing-greater-or-equal-to-thing">12.12. IS_THING_GREATER_OR_EQUAL_TO_THING</a></li>
</ul>
</li>
<li><a href="#grammar">Appendix A: Grammar Summary</a></li>
<li><a href="#regular-lexical-grammar">Appendix B: Regular Lexical Grammar</a></li>
<li><a href="#ambiguity">Appendix C: Ambiguity</a>
<ul class="sectlevel2">
<li><a href="#if-goto">C.1. IF GOTO</a></li>
<li><a href="#ternary-minus-one">C.2. Ternary Minus One</a></li>
</ul>
</li>
<li><a href="#how-to-miss2">Appendix D: How to MISS2</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an attempt to produce a formal language specification for the GTA3script language.</p>
</div>
<div class="paragraph">
<p>GTA3script is an imperative, strong and statically typed scripting language built by DMA Design (now Rockstar North) to design the mission scripts in Grand Theft Auto.</p>
</div>
<div class="paragraph">
<p>The DMA Design compiler is very basic and contains a huge amount of bugs. These bugs introduce a lot of inconsistencies and quirks to the language. This document attempts to resolve these issues and set a coherent language.</p>
</div>
<div class="paragraph">
<p>The language specified by this document is thus a subset of the language accepted by the in-house compiler. Any source code translated by an implementation of this should be able to be translated by the original compiler. The reverse is not true. A known list of differences is presented in <a href="#how-to-miss2">Appendix D</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scope"><a class="anchor" href="#scope"></a>1. Scope</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document is targeted at implementation writers and perhaps curious community members.</p>
</div>
<div class="paragraph">
<p>This document specifies the syntax, constraints and semantic rules of the GTA3script language.</p>
</div>
<div class="paragraph">
<p>This document does not specify a runtime system nor does it specify mechanisms by which the language is transformed for use by such a system.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="terms-and-definitions"><a class="anchor" href="#terms-and-definitions"></a>2. Terms and Definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For the purposes of this document, the terms and definitions given in <a href="#itvocabulary">[ISO/IEC 2382:2015]</a> and the following apply.</p>
</div>
<div class="paragraph">
<p>Terms that are used only in a small portion of this document are defined where they are used and italicized where they are defined.</p>
</div>
<div class="paragraph">
<p><strong>behaviour</strong></p>
</div>
<div class="paragraph">
<p>external appearance or action.</p>
</div>
<div class="paragraph">
<p><strong>behaviour, implementation-defined</strong></p>
</div>
<div class="paragraph">
<p>behavior specific to an implementation, where that implementation must document that behavior.</p>
</div>
<div class="paragraph">
<p><strong>behaviour, undefined</strong></p>
</div>
<div class="paragraph">
<p>behavior which is not guaranteed to produce any specific result.</p>
</div>
<div class="paragraph">
<p><strong>behaviour, unspecified</strong></p>
</div>
<div class="paragraph">
<p>behavior for which this specification provides two or more possibilities and imposes no further requirements on which is chosen in any instance.</p>
</div>
<div class="paragraph">
<p><strong>constraint</strong></p>
</div>
<div class="paragraph">
<p>restriction, either syntactic or semantic, on how language elements can be used.</p>
</div>
<div class="paragraph">
<p><strong>must</strong></p>
</div>
<div class="paragraph">
<p>describes an absolute requirement of the specification. synonymous with <strong>shall</strong>.</p>
</div>
<div class="paragraph">
<p><strong>must not</strong></p>
</div>
<div class="paragraph">
<p>describes an absolute prohibition of the specification. synonymous with <strong>shall not</strong>.</p>
</div>
<div class="paragraph">
<p><strong>should</strong></p>
</div>
<div class="paragraph">
<p>describes a recommended but not absolutely necessary requirement of the specification.</p>
</div>
<div class="paragraph">
<p><strong>should not</strong></p>
</div>
<div class="paragraph">
<p>describes an unrecommended but not absolutely necessary requirement of the specifcation.</p>
</div>
<div class="paragraph">
<p><strong>may</strong></p>
</div>
<div class="paragraph">
<p>describes an optional feature or behaviour of the specification.</p>
</div>
<div class="paragraph">
<p><strong>execution environment</strong></p>
</div>
<div class="paragraph">
<p>the software on which the result of translation is executed on.</p>
</div>
<div class="paragraph">
<p><strong>translation environment</strong></p>
</div>
<div class="paragraph">
<p>the software on which the language is translated for use by an execution environment.</p>
</div>
<div class="paragraph">
<p><strong>implementation</strong></p>
</div>
<div class="paragraph">
<p>particular set of software, running in a particular translation environment under particular control options, that performs translation of programs for, and supports execution of commands in, a particular execution environment.</p>
</div>
<div class="paragraph">
<p><strong>ill-formed program</strong></p>
</div>
<div class="paragraph">
<p>program that is not well-formed.</p>
</div>
<div class="paragraph">
<p><strong>well-formed program</strong></p>
</div>
<div class="paragraph">
<p>program constructed according to the synctatic and semantic rules as defined by this specification.</p>
</div>
<div class="paragraph">
<p><strong>value</strong></p>
</div>
<div class="paragraph">
<p>precise meaning of the contents of an name when interpreted as having a specific type.</p>
</div>
<div class="paragraph">
<p><strong>argument</strong></p>
</div>
<div class="paragraph">
<p>a value passed to a command that is intended to map to a corresponding parameter.</p>
</div>
<div class="paragraph">
<p><strong>parameter</strong></p>
</div>
<div class="paragraph">
<p>the value to be received in a specific argument position of a command.</p>
</div>
<div class="paragraph">
<p><strong>in-house compiler</strong></p>
</div>
<div class="paragraph">
<p>the translation environment used by DMA Design. this document refers more specifically to <a href="#references">Official GTA3 Script Compiler V413</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="general-principles"><a class="anchor" href="#general-principles"></a>3. General Principles</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="implementation-conformance"><a class="anchor" href="#implementation-conformance"></a>3.1. Implementation Conformance</h3>
<div class="paragraph">
<p>A conforming implementation must be able to translate and correctly execute, within its resource limits, any program which does not violate the rules in this document.</p>
</div>
<div class="paragraph">
<p>A conforming implementation must produce diagnostics for violations of the syntactic and semantic rules of this document except for those resulting in undefined behaviour.</p>
</div>
<div class="paragraph">
<p>A conforming implementation must document the choices made to implementation-defined portions of this specification as well as to unsupported optional features.</p>
</div>
<div class="paragraph">
<p>A conforming implementation may have extensions, provided they do not alter the behaviour of any well-formed program.</p>
</div>
<div class="paragraph">
<p>This specification does not impose any lower or upper bound restrictions on the resource limits of an implementation. An implementation should have reasonable limits given its problem domain, and should document them where known.</p>
</div>
</div>
<div class="sect2">
<h3 id="structure-of-this-document"><a class="anchor" href="#structure-of-this-document"></a>3.2. Structure of this Document</h3>
<div class="paragraph">
<p>Section <a href="#concepts">4</a> through <a href="#script-file-structure">10</a> describes the GTA3script programming language. That description includes detailed syntactic specifications in a form detailed in <a href="#syntax-notation">3.3</a>. For convenience, <a href="#grammar">Appendix A</a> repeats all such syntactic specifications.</p>
</div>
<div class="paragraph">
<p>Sections <a href="#command-def">11</a> and <a href="#alternator-def">12</a> describes a minimal set of commands to perform computations using the language.</p>
</div>
<div class="paragraph">
<p><a href="#regular-lexical-grammar">Appendix B</a> describes a regular grammar suitable for scanning the language.</p>
</div>
<div class="paragraph">
<p><a href="#ambiguity">Appendix C</a> describes ambiguities present in the language grammar and resolutions for them.</p>
</div>
<div class="paragraph">
<p><a href="#how-to-miss2">Appendix D</a> describes problematic elements in the in-house compiler that this specification choose not to follow.</p>
</div>
<div class="paragraph">
<p>Along this document there are several footnotes explaining or clarifying some decisions. Often these footnotes exposes the reason for changes in the language compared to the in-house compiler. These footnotes are purely informative and are not an integral part of this document.</p>
</div>
<div class="paragraph">
<p>Some changes demand more details than a footnote permits. These are marked with the footnote <sup class="footnote" id="_footnote_howtomiss2">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> and further details are presented in <a href="#how-to-miss2">Appendix D</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax-notation"><a class="anchor" href="#syntax-notation"></a>3.3. Syntax Notation</h3>
<div class="paragraph">
<p>The syntax in this document is specified using a variation of <a href="#ebnf">[ISO/IEC 14977:1996]</a> (also known as <em>EBNF</em>). This variant can be self-described as follow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># EBNF Grammar Used In This Specification (informative)

letter      := 'A'..'Z' | 'a'..'z' ;
digit       := '0'..'9' ;
character   := /* printable ASCII characters */ ;
identifier  := letter { letter | digit | '_' } ;
terminal    := "'" character { character } "'"
             | '"' character { character } '"' ;

syntax      := { production } ;
production  := identifier ':=' [ expression ] ';' ;
expression  := alternative { '|' alternative } ;
alternative := term { term } ;
term        := factor { '-' factor } ;
factor      := identifier | terminal [ '..' terminal ] | group | option | repetition ;
group       := '(' expression ')' ;
option      := '[' expression ']' ;
repetition  := '{' expression '}' ;</pre>
</div>
</div>
<div class="paragraph">
<p>The double-dot operator is an extension to EBNF. It represents the set of characters from the left to the right inclusive as alternatives.</p>
</div>
<div class="paragraph">
<p>A syntax specification might refer to symbols in <a href="#ascii">[ISO 646:1991 IRV]</a> (also known as <em>ASCII</em>) through comments, avoiding the alternation of a set of well known characters.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="concepts"><a class="anchor" href="#concepts"></a>4. Concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="concept-scripts"><a class="anchor" href="#concept-scripts"></a>4.1. Scripts</h3>
<div class="paragraph">
<p>A <em>script</em> is a unit of execution which contains its own <em>program counter</em>, <em>local variables</em> and <em>compare flag</em>.</p>
</div>
<div class="paragraph">
<p>A <em>program</em> is a collection of scripts running concurrently in a cooperative fashion.</p>
</div>
<div class="paragraph">
<p>A <em>variable</em> is a named storage location. This location holds a value of specific type.</p>
</div>
<div class="paragraph">
<p>There are global and local variables. <em>Global variables</em> are stored in a way they are accessible from any script. <em>Local variables</em> pertains to its particular script and is only accessible from it.</p>
</div>
<div class="paragraph">
<p>The lifetime of a <em>global variable</em> is the same as of the execution of all scripts. The lifetime of a <em>local variable</em> is the same as its script and lexical scope.</p>
</div>
<div class="paragraph">
<p>A <em>command</em> is an operation to be performed by a script. Commands produces <em>side-effects</em> which are described by each command description.</p>
</div>
<div class="paragraph">
<p>A possible side-effect of executing a command is the updating of the <em>compare flag</em>. The <em>compare flag</em> of a command is the boolean result it produces. The <em>compare flag of a script</em> is the <em>compare flag</em> of the its last executed command. The <em>compare flag</em> is useful for conditionally changing the <em>flow of control</em>.</p>
</div>
<div class="paragraph">
<p>The <em>program counter</em> of a script indicates its currently executing command. Unless one of the <em>side-effects</em> of a command is to change the <em>program counter</em>, the counter goes from the current command to the next sequentially. An explicit change in the <em>program counter</em> is said to be a change in the <em>flow of control</em>.</p>
</div>
<div class="paragraph">
<p>A command is said to perform a <em>jump</em> if it changes the <em>flow of control</em> irreversibly.</p>
</div>
<div class="paragraph">
<p>A command is said to call a <em>subroutine</em> if it changes the <em>flow of control</em> but saves the current <em>program counter</em> in a stack to be restored later.</p>
</div>
<div class="paragraph">
<p>A command is said to <em>terminate</em> a script if it halts and reclaims storage of such a script.</p>
</div>
</div>
<div class="sect2">
<h3 id="concept-script-files"><a class="anchor" href="#concept-script-files"></a>4.2. Script Files</h3>
<div class="paragraph">
<p>A <em>script file</em> is a source file containing a sequence of commands.</p>
</div>
<div class="paragraph">
<p>The <em>multi-file</em> is a collection of script files. Hereafter being the collection of script files being translated.</p>
</div>
<div class="paragraph">
<p>The <em>main script file</em> is the entry script file. This is where the first script (called the <em>main script</em>) starts execution.</p>
</div>
<div class="paragraph">
<p>Other script files are <em>required</em> to become part of the multi-file by the means of require statements within the main script file. The main script file itself is required from the translation environment.</p>
</div>
<div class="paragraph">
<p>Many kinds of script files can be required.</p>
</div>
<div class="paragraph">
<p>A <em>main extension file</em> (or <em>foreign gosub file</em>) is a script file required by the means of a <em>GOSUB_FILE statement</em>. Other script files can be required from main extension files.</p>
</div>
<div class="paragraph">
<p>A <em>subscript file</em> is a script file required by the means of the <em>LAUNCH_MISSION statement</em>. A <em>subscript</em> is a script started by the same statement.</p>
</div>
<div class="paragraph">
<p>A <em>mission script file</em> is a script file required by the means of the <em>LOAD_AND_LAUNCH_MISSION statement</em>. A <em>mission script</em> is a script started by the same statement. Only a single mission script can be running at once.</p>
</div>
<div class="paragraph">
<p>An implementation may contain special features regarding the way subscripts and mission scripts are executed.</p>
</div>
<div class="paragraph">
<p>The main script file is found in a unspecified manner. The other script files are found by recursively searching a directory with the same filename (excluding extension) as the main script file. This directory is in the same path as the main script file. The search for the script files shall be case-insensitive. All script files must have a <code>.sc</code> extension. If multiple script files with the same name are found, which script file is chosen is unspecified.</p>
</div>
<div class="paragraph">
<p>A script type is said to come before another script type under the following total order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Main script.</p>
</li>
<li>
<p>Main extension script.</p>
</li>
<li>
<p>Subscript.</p>
</li>
<li>
<p>Mission script.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A script file <em>A</em> (first required from <em>X</em>) is said to come before a script file <em>B</em> (first required from <em>Y</em>) under the following total order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If <em>A</em>'s script type is not the same as <em>B</em>'s, then <em>A</em> comes before <em>B</em> if and only if <em>A</em>'s script type comes before <em>B</em>'s script type.</p>
</li>
<li>
<p>Otherwise, if <em>X</em> is not the same as <em>Y</em>, <em>A</em> comes before <em>B</em> if and only if <em>X</em> comes before <em>Y</em>.</p>
</li>
<li>
<p>Otherwise, <em>A</em> comes before <em>B</em> if and only if the line on which <em>A</em> is first required from (in <em>X</em>) comes before the line on which <em>B</em> is first required from.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A line of code <em>A</em> in a script file <em>X</em> is said to come before a line <em>B</em> in a script file <em>Y</em> different from <em>X</em> if and only if <em>X</em> comes before <em>Y</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="concept-types"><a class="anchor" href="#concept-types"></a>4.3. Types</h3>
<div class="paragraph">
<p>An <em>integer</em> is a binary signed two&#8217;s-complement integral number. It represents 32 bits of data and the range of values <em>-2147483648</em> through <em>2147483647</em>.</p>
</div>
<div class="paragraph">
<p>A <em>floating-point</em> is a representation of a real number. Its exact representation, precision and range of values is implementation-defined.</p>
</div>
<div class="paragraph">
<p>A <em>label</em> is a name specifying the location of a command.</p>
</div>
<div class="paragraph">
<p>A <em>text label</em> is a name whose value is only known in the execution environment.</p>
</div>
<div class="paragraph">
<p>A <em>string</em> is a sequence of zero or more characters.</p>
</div>
<div class="paragraph">
<p>An <em>array</em> is a collection of one or more elements of the same type. Each element is indexed by an integer key.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="elements"><a class="anchor" href="#elements"></a>5. Elements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The lexical grammar of the language is context-sensitive. As such, the lexical elements and the syntactic elements are presented together.</p>
</div>
<div class="sect2">
<h3 id="element-source-code"><a class="anchor" href="#element-source-code"></a>5.1. Source Code</h3>
<div class="paragraph">
<p><em>Source code</em> is a stream of printable ASCII characters plus the control codes line feed (<code>\n</code>), horizontal tab (<code>\t</code>) and carriage return (<code>\r</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ascii_char := ascii_printable | ascii_control ;
ascii_printable := /* printable ASCII characters */ ;
ascii_control := '\n' | '\t' | '\r' ;</pre>
</div>
</div>
<div class="paragraph">
<p>Carriage returns should appear only before a line feed.</p>
</div>
<div class="paragraph">
<p>Lowercase letters in the stream shall be interpreted as its uppercase equivalent.</p>
</div>
<div class="paragraph">
<p>Space, horizontal tab, parentheses and comma are defined as whitespace characters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>whitespace := ' ' | '\t' | '(' | ')' | ',' ;</pre>
</div>
</div>
<div class="paragraph">
<p>A <em>line</em> is a sequence of characters delimited by a newline. The start of the stream begins a line. The end of the stream finishes a line.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>newline := ['\r'] `\n` ;</pre>
</div>
</div>
<div class="paragraph">
<p>Each line should be interpreted as if there is no whitespaces in either ends of the line.</p>
</div>
<div class="paragraph">
<p>A <em>token character</em> is any character capable of forming a single token.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>graph_char := ascii_printable - (whitespace | '"') ;
token_char := graph_char - ('+' | '-' | '*' | '/' | '=' | '&lt;' | '&gt;') ;</pre>
</div>
</div>
<div class="paragraph">
<p>To simplify future definitions, the productions <code>eol</code> (end of line) and <code>sep</code> (token separator) are defined.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sep := whitespace {whitespace} ;
eol := newline | EOF ;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="element-comment"><a class="anchor" href="#element-comment"></a>5.2. Comments</h3>
<div class="paragraph">
<p><em>Comments</em> serve as program documentation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>comment := line_comment | block_comment ;
line_comment := '//' {ascii_char} eol ;
block_comment := '/*' {block_comment | ascii_char} '*/' ;</pre>
</div>
</div>
<div class="paragraph">
<p>There are two forms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Line comments</em> starts with the character sequence <code>//</code> and stop at the end of the line.</p>
</li>
<li>
<p><em>Block comments</em> starts with the character sequence <code>/*</code> and stop with its matching <code>*/</code>. Block comments can be nested inside each other.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The contents of a comment shall be interpreted as if it is whitespaces in the source code. More specifically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A line comment should be interpreted as an <code>eol</code>.</p>
</li>
<li>
<p>A single, nested, block comment should be interpreted as an <code>eol</code> on each line boundary it crosses. On its last line (i.e. the one it does not cross), it should be interpreted as one or more whitespace characters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Comments cannot start inside string literals.</p>
</div>
</div>
<div class="sect2">
<h3 id="element-command"><a class="anchor" href="#element-command"></a>5.3. Commands</h3>
<div class="paragraph">
<p>A command describes an operation for a script to perform.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>command_name := token_char {token_char} ;
command := command_name { sep argument } ;</pre>
</div>
</div>
<div class="paragraph">
<p>There are several types of arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>argument := integer
          | floating
          | identifier
          | string_literal ;</pre>
</div>
</div>
<div class="sect3">
<h4 id="element-integer-literal"><a class="anchor" href="#element-integer-literal"></a>5.3.1. Integer Literals</h4>
<div class="listingblock">
<div class="content">
<pre>digit := '0'..'9' ;
integer := ['-'] digit {digit} ;</pre>
</div>
</div>
<div class="paragraph">
<p>A <em>integer literal</em> is a sequence of digits optionally preceded by a minus sign.</p>
</div>
<div class="paragraph">
<p>If the literal begins with a minus, the number following it shall be negated.</p>
</div>
</div>
<div class="sect3">
<h4 id="element-floating-point-literal"><a class="anchor" href="#element-floating-point-literal"></a>5.3.2. Floating-Point Literals</h4>
<div class="listingblock">
<div class="content">
<pre>floating_form1 := '.' digit { digit | '.' | 'F' } ;
floating_form2 := digit { digit } ('.' | 'F') { digit | '.' | 'F' } ;
floating := ['-'] (floating_form1 | floating_form2) ;</pre>
</div>
</div>
<div class="paragraph">
<p>A <em>floating-point literal</em> is a nonempty sequence of digits which must contain at least one occurrence of the characters <code>.</code> or <code>F</code>.</p>
</div>
<div class="paragraph">
<p>Once the <code>F</code> characters is found, all characters including and following it shall be ignored. The same shall happen when the character <code>.</code> is found a second time.</p>
</div>
<div class="paragraph">
<p>The literal can be preceded by a minus sign, which shall negate the floating-point number.</p>
</div>
<div class="paragraph">
<p>The following are examples of valid and invalid literals:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Literal</th>
<th class="tableblock halign-left valign-top">Same As</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">invalid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">invalid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.1f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.1.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="element-identifier"><a class="anchor" href="#element-identifier"></a>5.3.3. Identifiers</h4>
<div class="listingblock">
<div class="content">
<pre>identifier := ('$' | 'A'..'Z') {token_char} ;</pre>
</div>
</div>
<div class="paragraph">
<p>An <em>identifier</em> is a sequence of token characters beggining with a dollar or alphabetic character.</p>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>An identifier shall not end with a <code>:</code> character.</p>
</div>
</div>
<div class="sect3">
<h4 id="element-string-literal"><a class="anchor" href="#element-string-literal"></a>5.3.4. String Literals</h4>
<div class="paragraph">
<p>A <em>string literal</em> holds a string delimited by quotation marks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>string_literal := '"' { ascii_char - (newline | '"') } '"' ;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="element-variable-reference"><a class="anchor" href="#element-variable-reference"></a>5.3.5. Variable References</h4>
<div class="paragraph">
<p>A <em>variable name</em> is a sequence of token characters, except the characters <code>[</code> and <code>]</code> cannot happen.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>variable_char := token_char - ('[' | ']') ;
variable_name := ('$' | 'A'..'Z') {variable_char} ;</pre>
</div>
</div>
<div class="paragraph">
<p>A <em>variable reference</em> is a variable name optionally followed by an array subscript.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>subscript := '[' (variable_name | integer) ']' ;
variable := variable_name [ subscript ] ;</pre>
</div>
</div>
<div class="paragraph">
<p>The type of a variable reference is the type of the variable name being referenced.</p>
</div>
<div class="paragraph">
<p>The subscript uses an integer literal or another variable name of integer type for zero-based indexing.</p>
</div>
<div class="paragraph">
<p>The program is ill-formed if the array subscript uses a negative or out of bounds value for indexing.</p>
</div>
<div class="paragraph">
<p>The program is ill-formed if a variable name is followed by a subscript but the variable is not an array.</p>
</div>
<div class="paragraph">
<p>An array variable name which is not followed by a subscript behaves as if its zero-indexed element is referenced.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="parameters"><a class="anchor" href="#parameters"></a>6. Parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A command receives several arguments. Every argument must obey the rules of its corresponding <em>parameter definition</em>.</p>
</div>
<div class="paragraph">
<p>A <em>parameter definition</em> is a set of definitions regarding a single parameter for a specific command.</p>
</div>
<div class="paragraph">
<p>A command must have the same amount of arguments as its amount of parameter definitions, unless the missing arguments correspond to <em>optional parameters</em> (defined below).</p>
</div>
<div class="paragraph">
<p>If a variable is used in the same command both as an input and as an output, the input shall be evaluated before any output is assigned to the variable.</p>
</div>
<div class="sect2">
<h3 id="string-constants"><a class="anchor" href="#string-constants"></a>6.1. String Constants</h3>
<div class="paragraph">
<p>A <em>string constant</em> is a name associated with an integer value. Such association is known in the translation environment.</p>
</div>
<div class="paragraph">
<p>An <em>enumeration</em> is a collection of string constants.</p>
</div>
<div class="paragraph">
<p>A parameter definition can have an associated enumeration. A string constant is said to be a match if an identifier in an argument refers to a name in its parameter&#8217;s enumeration.</p>
</div>
<div class="paragraph">
<p>There is an special enumeration called the <em>global string constants enumeration</em> which semantics are defined along this specification. Other enumerations can be defined by an implementation.</p>
</div>
<div class="paragraph">
<p>If a parameter definition specifies an enumeration, the global string constants enumeration cannot be matched in the said parameter.</p>
</div>
</div>
<div class="sect2">
<h3 id="entities"><a class="anchor" href="#entities"></a>6.2. Entities</h3>
<div class="paragraph">
<p>An <em>entity</em> is an object of the execution environment. Each entity has an <em>entity type</em>, which defines its purposes.</p>
</div>
<div class="paragraph">
<p>A parameter definition can have an associated entity type.</p>
</div>
<div class="paragraph">
<p>An entity can be assigned to a variable. In such case, the variable is said to be of that specific entity type from that line of code on. Previous lines of code are not affected.</p>
</div>
<div class="paragraph">
<p>If an entity type is associated with an parameter and a variable is used as argument, the variable must have the same entity type as the parameter.</p>
</div>
<div class="paragraph">
<p>Further semantics for entities are defined along this document.</p>
</div>
</div>
<div class="sect2">
<h3 id="parameter-types"><a class="anchor" href="#parameter-types"></a>6.3. Parameter Types</h3>
<div class="sect3">
<h4 id="parameter-type-int"><a class="anchor" href="#parameter-type-int"></a>6.3.1. INT</h4>
<div class="paragraph">
<p>An <em>INT parameter</em> accepts an argument only if it is an integer literal or an identifier matching a global string constant.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-float"><a class="anchor" href="#parameter-type-float"></a>6.3.2. FLOAT</h4>
<div class="paragraph">
<p>A <em>FLOAT parameter</em> accepts an argument only if it is a floating-point literal.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-var-int"><a class="anchor" href="#parameter-type-var-int"></a>6.3.3. VAR_INT</h4>
<div class="paragraph">
<p>A <em>VAR_INT parameter</em> accepts an argument only if it is an identifier referencing a global variable of integer type.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-var-float"><a class="anchor" href="#parameter-type-var-float"></a>6.3.4. VAR_FLOAT</h4>
<div class="paragraph">
<p>A <em>VAR_FLOAT parameter</em> accepts an argument only if it is an identifier referencing a global variable of floating-point type.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-lvar-int"><a class="anchor" href="#parameter-type-lvar-int"></a>6.3.5. LVAR_INT</h4>
<div class="paragraph">
<p>A <em>LVAR_INT parameter</em> accepts an argument only if it is an identifier referencing a local variable of integer type.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-lvar-float"><a class="anchor" href="#parameter-type-lvar-float"></a>6.3.6. LVAR_FLOAT</h4>
<div class="paragraph">
<p>A <em>LVAR_FLOAT parameter</em> accepts an argument only if it is an identifier referencing a local variable of floating-point type.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-input-int"><a class="anchor" href="#parameter-type-input-int"></a>6.3.7. INPUT_INT</h4>
<div class="paragraph">
<p>An <em>INPUT_INT parameter</em> accepts an argument only if it is an integer literal or an identifier either matching a string constant, global string constant or referencing a variable of integer type (in this order).</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-input-float"><a class="anchor" href="#parameter-type-input-float"></a>6.3.8. INPUT_FLOAT</h4>
<div class="paragraph">
<p>An <em>INPUT_FLOAT parameter</em> accepts an argument only if it is a floating-point literal or an identifier referencing a variable of floating-point type.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-output-int"><a class="anchor" href="#parameter-type-output-int"></a>6.3.9. OUTPUT_INT</h4>
<div class="paragraph">
<p>An <em>OUTPUT_INT parameter</em> accepts an argument only if it is an identifier referencing a variable of integer type.</p>
</div>
<div class="paragraph">
<p>If an entity type is associated with the parameter, the variable must have the same entity type as the parameter, unless there is no entity type associated with the variable. In the latter case, the parameter&#8217;s entity type is assigned to the variable.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-output-float"><a class="anchor" href="#parameter-type-output-float"></a>6.3.10. OUTPUT_FLOAT</h4>
<div class="paragraph">
<p>An <em>OUTPUT_FLOAT parameter</em> accepts an argument only if it is a identifier referencing a variable of floating-point type.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-label"><a class="anchor" href="#parameter-type-label"></a>6.3.11. LABEL</h4>
<div class="paragraph">
<p>A <em>LABEL parameter</em> accepts an argument only if it is an identifier whose name is a label in the multi-file.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-text-label"><a class="anchor" href="#parameter-type-text-label"></a>6.3.12. TEXT_LABEL</h4>
<div class="paragraph">
<p>A <em>TEXT_LABEL parameter</em> accepts an argument only if it is an identifier. If the identifier begins with a dollar character (<code>$</code>), its suffix must reference a variable of text label type and such a variable is the actual argument. Otherwise, the identifier is a text label.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-var-text-label"><a class="anchor" href="#parameter-type-var-text-label"></a>6.3.13. VAR_TEXT_LABEL</h4>
<div class="paragraph">
<p>A <em>VAR_TEXT_LABEL parameter</em> accepts an argument only if it is an identifier referencing a global variable of text label type.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-lvar-text-label"><a class="anchor" href="#parameter-type-lvar-text-label"></a>6.3.14. LVAR_TEXT_LABEL</h4>
<div class="paragraph">
<p>A <em>LVAR_TEXT_LABEL parameter</em> accepts an argument only if it is an identifier referencing a local variable of text label type.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-string"><a class="anchor" href="#parameter-type-string"></a>6.3.15. STRING</h4>
<div class="paragraph">
<p>A <em>STRING parameter</em> accepts an argument only if it is a string literal.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameter-type-optional"><a class="anchor" href="#parameter-type-optional"></a>6.3.16. Optional Parameters</h4>
<div class="paragraph">
<p>Additionally, the following parameters are defined as behaving equivalently to their correspondent parameters above, except that in case an argument is absent, parameter checking stops as if there are no more parameters to be checked.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="parameter-type-var-int-opt"></a> <em>VAR_INT_OPT</em></p>
</li>
<li>
<p><a id="parameter-type-var-float-opt"></a> <em>VAR_FLOAT_OPT</em></p>
</li>
<li>
<p><a id="parameter-type-lvar-int-opt"></a> <em>LVAR_INT_OPT</em></p>
</li>
<li>
<p><a id="parameter-type-lvar-float-opt"></a> <em>LVAR_FLOAT_OPT</em></p>
</li>
<li>
<p><a id="parameter-type-var-text-label-opt"></a> <em>VAR_TEXT_LABEL_OPT</em></p>
</li>
<li>
<p><a id="parameter-type-lvar-text-label-opt"></a> LVAR_TEXT_LABEL_OPT_</p>
</li>
<li>
<p><em>INPUT_OPT</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Such parameters are always trailing parameters.</p>
</div>
<div class="paragraph">
<p><a id="parameter-type-input-opt"></a> The <em>INPUT_OPT parameter</em> accepts an argument only if it is an integer literal, floating-point literal, or identifier referencing a variable of integer, floating-point or text label type.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="alternators"><a class="anchor" href="#alternators"></a>7. Command Selectors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <em>command selector</em> (or <em>alternator</em>) is a kind of command which gets rewritten by the translator to another command based on the supplied argument types.</p>
</div>
<div class="paragraph">
<p>A command selector consists of a name and a finite sequence of commands which are alternatives for replacement.</p>
</div>
<div class="paragraph">
<p>A command name which is the name of a selector shall behave as if its command name is rewritten as a <em>matching alternative</em> before any parameter checking takes place.</p>
</div>
<div class="paragraph">
<p>A <em>matching alternative</em> is the first command in the alternative sequence to have the same amount of parameters as arguments in the actual command, and to obey the following rules for every argument and its corresponding parameter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An integer literal argument must have a parameter of type <em>INT</em>.</p>
</li>
<li>
<p>A floating-point literal argument must have a parameter of type <em>FLOAT</em>.</p>
</li>
<li>
<p>For identifiers, the following applies (in the given order):</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If the identifier matches a global string constant, the parameter type must be <em>INT</em>.</p>
</li>
<li>
<p>If the identifier references a global variable, the parameter type must be either (depending on the type of the said variable) <em>VAR_INT</em>, <em>VAR_FLOAT</em> or <em>VAR_TEXT_LABEL</em>.</p>
</li>
<li>
<p>If the identifier references a local variable, the same rule as above applies, except by using <em>LVAR_INT</em>, <em>LVAR_FLOAT</em> and <em>LVAR_TEXT_LABEL</em>.</p>
</li>
<li>
<p>If the identifier matches any string constant in any enumeration, the parameter type must be <em>INPUT_INT</em> and the argument shall behave as if rewritten as an integer literal corresponding to the string constant&#8217;s value.</p>
</li>
<li>
<p>Otherwise, the parameter type must be <em>TEXT_LABEL</em>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If no matching alternative is found, the program is ill-formed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="expressions"><a class="anchor" href="#expressions"></a>8. Expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>An argument in an expression cannot be a string literal.</p>
</div>
<div class="paragraph">
<p>The name of commands used to require script files (e.g. <code>GOSUB_FILE</code>) and its directive commands (i.e. <code>MISSION_START</code> and <code>MISSION_END</code>) cannot be on the left hand side of a expression.</p>
</div>
<div class="sect2">
<h3 id="assignment-expressions"><a class="anchor" href="#assignment-expressions"></a>8.1. Assignment Expressions</h3>
<div class="listingblock">
<div class="content">
<pre>binop := '+' | '-' | '*' | '/' | '+@' | '-@' ;
asop := '=' | '=#' | '+=' | '-=' | '*=' | '/=' | '+=@' | '-=@' ;
unop := '--' | '++' ;

expr_assign_abs := identifier {whitespace} '=' {whitespace} 'ABS' {whitespace} argument ;
expr_assign_binary := identifier {whitespace} asop {whitespace} argument ;
expr_assign_ternary := identifier {whitespace} '=' {whitespace} argument {whitespace} binop {whitespace} argument ;
expr_assign_unary := (unop {whitespace} identifier)
                   | (identifier {whitespace} unop) ;

assignment_expression := expr_assign_unary
                       | expr_assign_binary
                       | expr_assign_ternary
                       | expr_assign_abs ;</pre>
</div>
</div>
<div class="paragraph">
<p>The unary assignments <code>++a</code> and <code>a++</code> behaves as if <code>ADD_THING_TO_THING a 1</code> is executed.</p>
</div>
<div class="paragraph">
<p>The unary assignments <code>--a</code> and <code>a--</code>  behaves as if <code>SUB_THING_FROM_THING a 1</code> is executed.</p>
</div>
<div class="paragraph">
<p>The binary assignment expressions behaves as if the following is executed:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Expression</th>
<th class="tableblock halign-left valign-top">Behaves As If</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a = b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SET a b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a =# b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CSET a b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a += b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ADD_THING_TO_THING a b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a -= b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SUB_THING_FROM_THING a b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a *= b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MULT_THING_BY_THING a b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a /= b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DIV_THING_BY_THING a b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a +=@ b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ADD_THING_TO_THING_TIMED a b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a -=@ b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SUB_THING_FROM_THING_TIMED a b</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The absolute assignment <code>a = ABS b</code> behaves as if the following is executed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ABS a</code> if the name <code>a</code> is the same as the name <code>b</code>.</p>
</li>
<li>
<p><code>SET a b</code> followed by <code>ABS a</code> otherwise.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The ternary assignment <code>a = b + c</code> behaves as if the following is executed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ADD_THING_TO_THING a c</code> if the name <code>a</code> is the same as the name <code>b</code>.</p>
</li>
<li>
<p><code>ADD_THING_TO_THING a b</code> if the name <code>a</code> is the same as the name <code>c</code>.</p>
</li>
<li>
<p><code>SET a b</code> followed by <code>ADD_THING_TO_THING a c</code> otherwise.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The ternary assignment <code>a = b - c</code> behaves as if the following is executed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SUB_THING_FROM_THING a c</code> if the name <code>a</code> is the same as the name <code>b</code>.</p>
</li>
<li>
<p>Implementation-defined if <code>a</code> is the same name as <code>c</code>.</p>
</li>
<li>
<p><code>SET a b</code> followed by <code>SUB_THING_BY_THING a c</code> otherwise.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The ternary assignment <code>a = b * c</code> behaves as if <code>a = b + c</code>, except by using <code>MULT_THING_BY_THING</code> instead of <code>ADD_THING_TO_THING</code>.</p>
</div>
<div class="paragraph">
<p>The ternary assignment <code>a = b / c</code> behaves as if <code>a = b - c</code>, except by using <code>DIV_THING_BY_THING</code> instead of <code>SUB_THING_FROM_THING</code>.</p>
</div>
<div class="paragraph">
<p>The ternary assignments <code>a = b +@ c</code> and <code>a = b -@ c</code> behaves as if <code>a = b - c</code>, except by using <code>ADD_THING_TO_THING_TIMED</code> and <code>SUB_THING_FROM_THING_TIMED</code>, respectively, instead of <code>SUB_THING_FROM_THING</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="conditional-expressions"><a class="anchor" href="#conditional-expressions"></a>8.2. Conditional Expressions</h3>
<div class="listingblock">
<div class="content">
<pre>relop := '=' | '&lt;' | '&gt;' | '&gt;=' | '&lt;=' ;
conditional_expression := argument {whitespace} relop {whitespace} argument ;</pre>
</div>
</div>
<div class="paragraph">
<p>These expressions behave as if the following is executed:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Expression</th>
<th class="tableblock halign-left valign-top">Behaves As If</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a = b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IS_THING_EQUAL_TO_THING a b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &gt; b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IS_THING_GREATER_THAN_THING a b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &gt;= b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IS_THING_GREATER_OR_EQUAL_TO_THING a b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &lt; b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IS_THING_GREATER_THAN_THING b a</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a &lt;= b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IS_THING_GREATER_OR_EQUAL_TO_THING b a</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="statements"><a class="anchor" href="#statements"></a>9. Statements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A statement specifies an action to be executed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>statement := labeled_statement
           | embedded_statement ;</pre>
</div>
</div>
<div class="sect2">
<h3 id="statement-labeled"><a class="anchor" href="#statement-labeled"></a>9.1. Labeled Statements</h3>
<div class="paragraph">
<p>Statements can be prefixed with a label.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>label_def := identifier ':' ;
label_prefix := label_def sep ;

labeled_statement := label_prefix embedded_statement
                   | label_def empty_statement ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>The name of a label must be unique across the multi-file.</p>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>This declares a label named after the given identifier.</p>
</div>
<div class="paragraph">
<p>The label can be referenced in certain commands to transfer (or start) control of execution to the statement it prefixes. Labels themselves do not alter the flow of control, which continues to the statement it embodies.</p>
</div>
</div>
<div class="sect2">
<h3 id="statement-empty"><a class="anchor" href="#statement-empty"></a>9.2. Empty Statements</h3>
<div class="listingblock">
<div class="content">
<pre>empty_statement := eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>An empty statement does nothing.</p>
</div>
</div>
<div class="sect2">
<h3 id="statement-embedded"><a class="anchor" href="#statement-embedded"></a>9.3. Embedded Statements</h3>
<div class="paragraph">
<p>Embedded statements are statements not prefixed by a label.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>embedded_statement := empty_statement
                     | command_statement
                     | expression_statement
                     | scope_statement
                     | var_statement
                     | if_statement
                     | ifnot_statement
                     | if_goto_statement
                     | ifnot_goto_statement
                     | while_statement
                     | whilenot_statement
                     | repeat_statement
                     | require_statement ;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="statement-command"><a class="anchor" href="#statement-command"></a>9.4. Command Statements</h3>
<div class="listingblock">
<div class="content">
<pre>command_statement := command eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>The command it embodies cannot be any of the commands specified by this section (e.g. <code>VAR_INT</code>, <code>ELSE</code>, <code>ENDWHILE</code>, <code>{</code>, <code>GOSUB_FILE</code>, <code>MISSION_START</code>, etc).</p>
</div>
</div>
<div class="sect2">
<h3 id="statement-expression"><a class="anchor" href="#statement-expression"></a>9.5. Expression Statements</h3>
<div class="listingblock">
<div class="content">
<pre>expression_statement := assignment_expression eol
                      | conditional_expression eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>An expression statement executes the expression it embodies.</p>
</div>
<div class="paragraph">
<p>The execution of the assignment expression <code>a = b</code> is favored over the execution of the conditional expression of the same form.</p>
</div>
</div>
<div class="sect2">
<h3 id="statement-scope"><a class="anchor" href="#statement-scope"></a>9.6. Scope Statements</h3>
<div class="listingblock">
<div class="content">
<pre>scope_statement := '{' eol
                   {statement}
                   [label_prefix] '}' eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>Lexical scopes cannot be nested.</p>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>The command <code>{</code> activates a lexical scope where local variables can be declared.</p>
</div>
<div class="paragraph">
<p>The command <code>}</code> leaves the active lexical scope.</p>
</div>
<div class="paragraph">
<p>The transfer of control to any of the statements within the scope block activates it.</p>
</div>
<div class="paragraph">
<p>The execution of a jump to outside the scope block leaves the lexical scope.</p>
</div>
<div class="paragraph">
<p>Performing a subroutine call does not leave the active scope. The name of local variables become hidden if the subroutine is not within the scope block. The behaviour of the program is undefined if such a subroutine activates another lexical scope.</p>
</div>
<div class="paragraph">
<p>Leaving a lexical scope causes the storage for the declared local variables to be reclaimed.</p>
</div>
</div>
<div class="sect2">
<h3 id="statement-variable-declaration"><a class="anchor" href="#statement-variable-declaration"></a>9.7. Variable Declaration Statements</h3>
<div class="listingblock">
<div class="content">
<pre>command_var_name := 'VAR_INT'
                    | 'LVAR_INT'
                    | 'VAR_FLOAT'
                    | 'LVAR_FLOAT'
                    | 'VAR_TEXT_LABEL'
                    | 'LVAR_TEXT_LABEL' ;
command_var_param := sep variable ;

var_statement := command_var_name command_var_param {command_var_param} eol ;</pre>
</div>
</div>
<div class="paragraph">
<p>The name of the command is a pair of storage duration and variable type.</p>
</div>
<div class="paragraph">
<p>The commands with the <code>VAR_</code> prefix declares global variables. The ones with <code>LVAR_</code> declares local variables. The <code>INT</code> suffix declares variables capable of storing integers. The <code>FLOAT</code> suffix declares floating-point ones. Finally, the <code>TEXT_LABEL</code> one declares variables capable of storing text labels.</p>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>Global variable names must be unique across the multi-file.</p>
</div>
<div class="paragraph">
<p>Local variables must be declared inside a lexical scope.</p>
</div>
<div class="paragraph">
<p>Local variables can have identical names as long as they are in different lexical scopes.</p>
</div>
<div class="paragraph">
<p>Local variables shall not have the same name as any global variable.</p>
</div>
<div class="paragraph">
<p>A variable shall not have the same name as any string constant in any enumeration (except for the global enumeration).</p>
</div>
<div class="paragraph">
<p>The array dimensions of the variable (if any) must be specified by an integer literal greater than zero.</p>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>This command declares one or more names with the specified storage duration, type, and array dimensions.</p>
</div>
<div class="paragraph">
<p>Global variable names can be seen by the entire multi-file.</p>
</div>
<div class="paragraph">
<p>Local variable names can be seen by their entire lexical scope.</p>
</div>
<div class="paragraph">
<p>The initial value of variables is unspecified.</p>
</div>
</div>
<div class="sect2">
<h3 id="statement-conditional"><a class="anchor" href="#statement-conditional"></a>9.8. Conditional Statements</h3>
<div class="paragraph">
<p>Conditional statements produce changes in the script compare flag.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>conditional_element := ['NOT' sep] (command | conditional_expression) ;

and_conditional_stmt := 'AND' sep conditional_element eol ;
or_conditional_stmt := 'OR' sep conditional_element eol ;

conditional_list := conditional_element eol
                    ({and_conditional_stmt} | {or_conditional_stmt}) ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>The command it embodies cannot be any of the commands specified by this section (e.g. <code>VAR_INT</code>, <code>ELSE</code>, <code>ENDWHILE</code>, <code>{</code>, <code>GOSUB_FILE</code>, <code>MISSION_START</code>, etc).</p>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>A conditional element executes the command or expression it embodies. The execution of a command follows the same semantic rules of a command statement. The compare flag of the executed element is negated if the <code>NOT</code> prefix is used.</p>
</div>
<div class="paragraph">
<p>A conditional list is a sequence of one or more conditional elements separated by either <code>AND</code> or <code>OR</code> tokens.</p>
</div>
<div class="paragraph">
<p>The compare flag is set to true if the compare flag of all conditional elements in a <code>AND</code> list holds true. Otherwise it is set to false.</p>
</div>
<div class="paragraph">
<p>The compare flag is set to true if the compare flag of at least one conditional elements in a <code>OR</code> list holds true. Otherwise it is set to false.</p>
</div>
<div class="paragraph">
<p>A conditional list shall not be short-circuit evaluated. All conditional elements are executed in order.</p>
</div>
<div class="paragraph">
<p>The behaviour is undefined if the command used in a conditional element does not cause side-effects in the compare flag.</p>
</div>
</div>
<div class="sect2">
<h3 id="statement-selection"><a class="anchor" href="#statement-selection"></a>9.9. Selection Statements</h3>
<div class="paragraph">
<p>Selection statements selects which statement to execute depending on certain conditions.</p>
</div>
<div class="sect3">
<h4 id="statement-if"><a class="anchor" href="#statement-if"></a>9.9.1. IF Statement</h4>
<div class="listingblock">
<div class="content">
<pre>if_statement := 'IF' sep conditional_list
                {statement}
                [[label_prefix] 'ELSE' eol
                {statement}]
                [label_prefix] 'ENDIF' eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>This statement executes a list of conditions, grabs its compare flag and chooses between two set of statements to execute.</p>
</div>
<div class="paragraph">
<p>If the compare flag is true, control is transferred to the first set of statements. Otherwise, to the second set if an <code>ELSE</code> exists. Execution of the <code>ELSE</code> or the <code>ENDIF</code> command causes control to leave the IF block.</p>
</div>
</div>
<div class="sect3">
<h4 id="statement-ifnot"><a class="anchor" href="#statement-ifnot"></a>9.9.2. IFNOT Statement</h4>
<div class="listingblock">
<div class="content">
<pre>ifnot_statement := 'IFNOT' sep conditional_list
                   {statement}
                   [[label_prefix] 'ELSE' eol
                   {statement}]
                   [label_prefix] 'ENDIF' eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>The behaviour of this is the same as of the IF statement, except the complement of the compare flag is used to test which set of statements to execute.</p>
</div>
</div>
<div class="sect3">
<h4 id="statement-if-goto"><a class="anchor" href="#statement-if-goto"></a>9.9.3. IF GOTO Statement</h4>
<div class="listingblock">
<div class="content">
<pre>if_goto_statement := 'IF' sep conditional_element sep 'GOTO' sep identifier eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>This statement performs a jump to the label specified by identifier if the compare flag of the conditional element holds true. Otherwise, the flow of control is unchanged.</p>
</div>
</div>
<div class="sect3">
<h4 id="statement-ifnot-goto"><a class="anchor" href="#statement-ifnot-goto"></a>9.9.4. IFNOT GOTO Statement</h4>
<div class="listingblock">
<div class="content">
<pre>ifnot_goto_statement := 'IFNOT' sep conditional_element sep 'GOTO' sep identifier eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>The behaviour of this is the same as of the IF GOTO statement, except the complement of the compare flag is used to test whether to jump.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="statement-iteration"><a class="anchor" href="#statement-iteration"></a>9.10. Iteration Statements</h3>
<div class="sect3">
<h4 id="statement-while"><a class="anchor" href="#statement-while"></a>9.10.1. WHILE Statement</h4>
<div class="listingblock">
<div class="content">
<pre>while_statement := 'WHILE' sep conditional_list
                   {statement}
                   [label_prefix] 'ENDWHILE' eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>The WHILE statement executes a set of statements while the compare flag of the conditional list holds true.</p>
</div>
<div class="paragraph">
<p>The statement executes by grabbing the compare flag of the list of conditions and transferring control to after the WHILE block if it holds false. Otherwise, it executes the given set of statements. Execution of the <code>ENDWHILE</code> command causes control to be transferred to beginning of the block, where the conditions are evaluated again.</p>
</div>
</div>
<div class="sect3">
<h4 id="statement-whilenot"><a class="anchor" href="#statement-whilenot"></a>9.10.2. WHILENOT Statement</h4>
<div class="listingblock">
<div class="content">
<pre>whilenot_statement := 'WHILENOT' sep conditional_list
                      {statement}
                      [label_prefix] 'ENDWHILE' eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>The behaviour of this is the same as of the WHILE statement, except the complement of the compare flag is used to test whether to continue executing the set of statements.</p>
</div>
</div>
<div class="sect3">
<h4 id="statement-repeat"><a class="anchor" href="#statement-repeat"></a>9.10.3. REPEAT Statement</h4>
<div class="listingblock">
<div class="content">
<pre>repeat_statement := 'REPEAT' sep integer sep identifier eol
                    {statement}
                    [label_prefix] 'ENDREPEAT' eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>The first argument to REPEAT must be an integer literal.</p>
</div>
<div class="paragraph">
<p>The second argument must be a variable of integer type.</p>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>The REPEAT statement executes a set of statements until a counter variable reaches a threshold.</p>
</div>
<div class="paragraph">
<p>The <code>REPEAT</code> command causes the variable to be set to zero. Execution of the <code>ENDREPEAT</code> command causes the variable to be incremented and if it compares less than the threshold, it transfers control back to the set of statements. Otherwise, it leaves the block.</p>
</div>
<div class="paragraph">
<p>The statements are always executed at least once.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="statement-require"><a class="anchor" href="#statement-require"></a>9.11. Require Statements</h3>
<div class="listingblock">
<div class="content">
<pre>filename := {graph_char} '.SC' ;

require_statement := command_gosub_file
                   | command_launch_mission
                   | command_load_and_launch_mission ;</pre>
</div>
</div>
<div class="paragraph">
<p>Require statements request script files to become part of the multi-file being translated.</p>
</div>
<div class="paragraph">
<p>A file can be required more than once. If it is required using the same statement as the first request, the latter request is ignored. Otherwise, behaviour is undefined.</p>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>Require statements shall only appear in the <em>main script file</em> or <em>main extension files</em>.</p>
</div>
<div class="sect3">
<h4 id="statement-gosub-file"><a class="anchor" href="#statement-gosub-file"></a>9.11.1. GOSUB_FILE Statement</h4>
<div class="listingblock">
<div class="content">
<pre>command_gosub_file := 'GOSUB_FILE' sep identifier sep filename eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>The <code>GOSUB_FILE</code> command requires a <em>main extension file</em> to become part of the multi-file.</p>
</div>
<div class="paragraph">
<p>It also calls the subroutine specified by label.</p>
</div>
<div class="paragraph">
<p>The behaviour is undefined if the label is not part of the required file.</p>
</div>
</div>
<div class="sect3">
<h4 id="statement-launch-mission"><a class="anchor" href="#statement-launch-mission"></a>9.11.2. LAUNCH_MISSION Statement</h4>
<div class="listingblock">
<div class="content">
<pre>command_launch_mission := 'LAUNCH_MISSION' sep filename eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>The <code>LAUNCH_MISSION</code> command requires a <em>subscript file</em> to become part of the multi-file.</p>
</div>
<div class="paragraph">
<p>It also starts a new subscript with the program counter at the <code>MISSION_START</code> directive of the specified script file.</p>
</div>
</div>
<div class="sect3">
<h4 id="statement-load-and-launch-mission"><a class="anchor" href="#statement-load-and-launch-mission"></a>9.11.3. LOAD_AND_LAUNCH_MISSION Statement</h4>
<div class="listingblock">
<div class="content">
<pre>command_load_and_launch_mission := 'LOAD_AND_LAUNCH_MISSION' sep filename eol ;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>Only a single <em>mission script</em> can be running at once.</p>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>The <code>LOAD_AND_LAUNCH_MISSION</code> command requires a <em>mission script file</em> to become part of the multi-file.</p>
</div>
<div class="paragraph">
<p>It also starts a new <em>mission script</em> with the program counter at the <code>MISSION_START</code> directive of the specified script file.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="script-file-structure"><a class="anchor" href="#script-file-structure"></a>10. Script File Structure</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="script-file-structure-main"><a class="anchor" href="#script-file-structure-main"></a>10.1. Main Script Files</h3>
<div class="listingblock">
<div class="content">
<pre>main_script_file := {statement} ;</pre>
</div>
</div>
<div class="paragraph">
<p>A main script file is a sequence of zero or more statements.</p>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>The main script starts execution at the first statement of the main script file. If there is no statement to be executed, behaviour is undefined.</p>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>Commands in the main script file shall not refer to labels in mission script files.</p>
</div>
</div>
<div class="sect2">
<h3 id="script-file-structure-main-extension"><a class="anchor" href="#script-file-structure-main-extension"></a>10.2. Main Extension Files</h3>
<div class="listingblock">
<div class="content">
<pre>main_extension_file := {statement} ;</pre>
</div>
</div>
<div class="paragraph">
<p>A main extension file is a sequence of zero or more statements.</p>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>Commands in main extension files shall not refer to labels in mission script files.</p>
</div>
</div>
<div class="sect2">
<h3 id="script-file-structure-subscript"><a class="anchor" href="#script-file-structure-subscript"></a>10.3. Subscript Files</h3>
<div class="listingblock">
<div class="content">
<pre>subscript_file := 'MISSION_START' eol
                  {statement}
                  [label_prefix] 'MISSION_END' eol
                  {statement} ;</pre>
</div>
</div>
<div class="paragraph">
<p>A subscript file is a sequence of zero or more statements in a <code>MISSION_START</code> and <code>MISSION_END</code> block. More statements can follow.</p>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>The <code>MISSION_START</code> command shall be the very first line of the subscript file and shall not be preceded by anything but ASCII spaces (<code> </code>) and horizontal tabs (<code>\t</code>). Even comments are disallowed.</p>
</div>
<div class="paragraph">
<p>Commands in subscript files shall not refer to labels in mission script files.</p>
</div>
<div class="paragraph">
<p><strong>Semantics</strong></p>
</div>
<div class="paragraph">
<p>The <code>MISSION_END</code> command behaves as if by executing the <code>TERMINATE_THIS_SCRIPT</code> command.</p>
</div>
</div>
<div class="sect2">
<h3 id="script-file-structure-mission"><a class="anchor" href="#script-file-structure-mission"></a>10.4. Mission Script Files</h3>
<div class="listingblock">
<div class="content">
<pre>mission_script_file := subscript_file ;</pre>
</div>
</div>
<div class="paragraph">
<p>A mission script file has the same structure of a subscript file.</p>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>Commands in mission script files shall not refer to labels in mission script files other than itself.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="command-def"><a class="anchor" href="#command-def"></a>11. Supporting Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to perform useful computation the following supporting commands may be available.</p>
</div>
<div class="sect2">
<h3 id="command-def-wait"><a class="anchor" href="#command-def-wait"></a>11.1. WAIT</h3>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>WAIT INPUT_INT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Yields control to another script. The current script is not resumed for at least the specified number of milliseconds.</p>
</div>
<div class="paragraph">
<p>This command is useful due to the cooperative multitasking nature of the execution environment.</p>
</div>
</div>
<div class="sect2">
<h3 id="command-def-goto"><a class="anchor" href="#command-def-goto"></a>11.2. GOTO</h3>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>GOTO LABEL</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Performs a jump to the specified location.</p>
</div>
</div>
<div class="sect2">
<h3 id="command-def-gosub"><a class="anchor" href="#command-def-gosub"></a>11.3. GOSUB</h3>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>GOSUB LABEL</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Calls the subroutine in the specified location.</p>
</div>
</div>
<div class="sect2">
<h3 id="command-def-return"><a class="anchor" href="#command-def-return"></a>11.4. RETURN</h3>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>RETURN</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Returns from the last called subroutine.</p>
</div>
<div class="paragraph">
<p>The behaviour is undefined if there is no active subroutine.</p>
</div>
</div>
<div class="sect2">
<h3 id="command-def-return-true"><a class="anchor" href="#command-def-return-true"></a>11.5. RETURN_TRUE</h3>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>RETURN_TRUE</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Returns true (as in any command updating the compare flag to true).</p>
</div>
</div>
<div class="sect2">
<h3 id="command-def-return-false"><a class="anchor" href="#command-def-return-false"></a>11.6. RETURN_FALSE</h3>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>RETURN_FALSE</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Returns false (as in any command updating the compare flag to false).</p>
</div>
</div>
<div class="sect2">
<h3 id="command-def-script-name"><a class="anchor" href="#command-def-script-name"></a>11.7. SCRIPT_NAME</h3>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>SCRIPT_NAME TEXT_LABEL</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Associates a name to the executing script.</p>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>The translation environment must enforce the following constraints.</p>
</div>
<div class="paragraph">
<p>The name of a script must be unique across the multi-file.</p>
</div>
<div class="paragraph">
<p>It is unspecified whether a name given by a text label variable is accepted.</p>
</div>
</div>
<div class="sect2">
<h3 id="command-def-terminate-this-script"><a class="anchor" href="#command-def-terminate-this-script"></a>11.8. TERMINATE_THIS_SCRIPT</h3>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>TERMINATE_THIS_SCRIPT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Terminates the executing script.</p>
</div>
</div>
<div class="sect2">
<h3 id="command-def-start-new-script"><a class="anchor" href="#command-def-start-new-script"></a>11.9. START_NEW_SCRIPT</h3>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>START_NEW_SCRIPT LABEL INPUT_OPT...</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Creates a script and sets its program counter to the specified label location.</p>
</div>
<div class="paragraph">
<p>The first few local variables at the scope of the target label are assigned the values of the optional input arguments. That is, the first declared local variable is set to the first optional argument, the second variable to the second optional argument, and so on.</p>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>The translation environment must enforce the following constraints.</p>
</div>
<div class="paragraph">
<p>The specified label location must be within a scope.</p>
</div>
<div class="paragraph">
<p>The type of a local variable and its respective input argument must match. For instance, if an input argument is an integer literal or variable of integer type, its corresponding local variable in the target scope must be of integer type.</p>
</div>
<div class="paragraph">
<p>If there are not enough local variables in the target scope to accomodate the input arguments the program is ill-formed.</p>
</div>
<div class="paragraph">
<p>If an input argument is a variable, the value assignment to the variable in the target scope shall obey the same constraints as specified in the SET alternator.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="alternator-def"><a class="anchor" href="#alternator-def"></a>12. Supporting Command Selectors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To further enchance the set of minimal commands for useful computation, the following command selectors and its supportive alternatives are defined.</p>
</div>
<div class="paragraph">
<p>An implementation is required to support these selectors, but it may not support all of its alternatives.</p>
</div>
<div class="sect2">
<h3 id="alternator-def-set"><a class="anchor" href="#alternator-def-set"></a>12.1. SET</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>SET_VAR_INT VAR_INT INT
SET_VAR_FLOAT VAR_FLOAT INT
SET_LVAR_INT LVAR_INT INT
SET_LVAR_FLOAT LVAR_FLOAT FLOAT
SET_VAR_INT_TO_VAR_INT VAR_INT TVAR_INT
SET_LVAR_INT_TO_LVAR_INT LVAR_INT LVAR_INT
SET_VAR_FLOAT_TO_VAR_FLOAT VAR_FLOAT VAR_FLOAT
SET_LVAR_FLOAT_TO_LVAR_FLOAT LVAR_FLOAT LVAR_FLOAT
SET_VAR_FLOAT_TO_LVAR_FLOAT VAR_FLOAT LVAR_FLOAT
SET_LVAR_FLOAT_TO_VAR_FLOAT LVAR_FLOAT VAR_FLOAT
SET_VAR_INT_TO_LVAR_INT VAR_INT LVAR_INT
SET_LVAR_INT_TO_VAR_INT LVAR_INT VAR_INT
SET_VAR_INT_TO_CONSTANT VAR_INT INPUT_INT
SET_LVAR_INT_TO_CONSTANT VAR_INT INPUT_INT
SET_VAR_TEXT_LABEL VAR_TEXT_LABEL TEXT_LABEL
SET_LVAR_TEXT_LABEL LVAR_TEXT_LABEL TEXT_LABEL</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Sets the variable on the left to the value on the right.</p>
</div>
<div class="paragraph">
<p><strong>Constraints</strong></p>
</div>
<div class="paragraph">
<p>The translation environment must enforce the following constraints.</p>
</div>
<div class="paragraph">
<p>A variable cannot be assigned to another variable of different entity type. If the right variable has no entity type but the left one does, the program is ill-formed. If the left variable has no entity type, the entity type of the right variable is assigned to it.</p>
</div>
</div>
<div class="sect2">
<h3 id="alternator-def-cset"><a class="anchor" href="#alternator-def-cset"></a>12.2. CSET</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>CSET_VAR_INT_TO_VAR_FLOAT VAR_INT VAR_FLOAT
CSET_VAR_FLOAT_TO_VAR_INT VAR_FLOAT VAR_INT
CSET_LVAR_INT_TO_VAR_FLOAT LVAR_INT VAR_FLOAT
CSET_LVAR_FLOAT_TO_VAR_INT LVAR_FLOAT VAR_INT
CSET_VAR_INT_TO_LVAR_FLOAT VAR_INT LVAR_FLOAT
CSET_VAR_FLOAT_TO_LVAR_INT VAR_FLOAT LVAR_INT
CSET_LVAR_INT_TO_LVAR_FLOAT LVAR_INT LVAR_FLOAT
CSET_LVAR_FLOAT_TO_LVAR_INT LVAR_FLOAT LVAR_INT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Sets the variable on the left to the value of the variable on the right converted to the left type.</p>
</div>
</div>
<div class="sect2">
<h3 id="alternator-def-add-thing-to-thing"><a class="anchor" href="#alternator-def-add-thing-to-thing"></a>12.3. ADD_THING_TO_THING</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>ADD_VAL_TO_INT_VAR VAR_INT INT
ADD_VAL_TO_FLOAT_VAR VAR_FLOAT FLOAT
ADD_VAL_TO_INT_LVAR LVAR_INT INT
ADD_VAL_TO_FLOAT_LVAR LVAR_FLOAT FLOAT
ADD_INT_VAR_TO_INT_VAR VAR_INT VAR_INT
ADD_FLOAT_VAR_TO_FLOAT_VAR VAR_FLOAT VAR_FLOAT
ADD_INT_LVAR_TO_INT_LVAR LVAR_INT LVAR_INT
ADD_FLOAT_LVAR_TO_FLOAT_LVAR LVAR_FLOAT LVAR_FLOAT
ADD_INT_VAR_TO_INT_LVAR LVAR_INT VAR_INT
ADD_FLOAT_VAR_TO_FLOAT_LVAR LVAR_FLOAT VAR_FLOAT
ADD_INT_LVAR_TO_INT_VAR VAR_INT LVAR_INT
ADD_FLOAT_LVAR_TO_FLOAT_VAR VAR_FLOAT LVAR_FLOAT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Adds the value on the right to the variable on the left.</p>
</div>
</div>
<div class="sect2">
<h3 id="alternator-def-sub-thing-from-thing"><a class="anchor" href="#alternator-def-sub-thing-from-thing"></a>12.4. SUB_THING_FROM_THING</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>SUB_VAL_FROM_INT_VAR VAR_INT INT
SUB_VAL_FROM_FLOAT_VAR VAR_FLOAT FLOAT
SUB_VAL_FROM_INT_LVAR LVAR_INT INT
SUB_VAL_FROM_FLOAT_LVAR LVAR_FLOAT FLOAT
SUB_INT_VAR_FROM_INT_VAR VAR_INT VAR_INT
SUB_FLOAT_VAR_FROM_FLOAT_VAR VAR_FLOAT VAR_FLOAT
SUB_INT_LVAR_FROM_INT_LVAR LVAR_INT LVAR_INT
SUB_FLOAT_LVAR_FROM_FLOAT_LVAR LVAR_FLOAT LVAR_FLOAT
SUB_INT_VAR_FROM_INT_LVAR LVAR_INT VAR_INT
SUB_FLOAT_VAR_FROM_FLOAT_LVAR LVAR_FLOAT VAR_FLOAT
SUB_INT_LVAR_FROM_INT_VAR VAR_INT LVAR_INT
SUB_FLOAT_LVAR_FROM_FLOAT_VAR VAR_FLOAT LVAR_FLOAT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Substracts the value on the right from the variable on the left.</p>
</div>
</div>
<div class="sect2">
<h3 id="alternator-def-mult-thing-by-thing"><a class="anchor" href="#alternator-def-mult-thing-by-thing"></a>12.5. MULT_THING_BY_THING</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>MULT_INT_VAR_BY_VAL VAR_INT INT
MULT_FLOAT_VAR_BY_VAL VAR_FLOAT FLOAT
MULT_INT_LVAR_BY_VAL LVAR_INT INT
MULT_FLOAT_LVAR_BY_VAL LVAR_FLOAT FLOAT
MULT_INT_VAR_BY_INT_VAR VAR_INT VAR_INT
MULT_FLOAT_VAR_BY_FLOAT_VAR VAR_FLOAT VAR_FLOAT
MULT_INT_LVAR_BY_INT_LVAR LVAR_INT LVAR_INT
MULT_FLOAT_LVAR_BY_FLOAT_LVAR LVAR_FLOAT LVAR_FLOAT
MULT_INT_VAR_BY_INT_LVAR VAR_INT LVAR_INT
MULT_FLOAT_VAR_BY_FLOAT_LVAR VAR_FLOAT LVAR_FLOAT
MULT_INT_LVAR_BY_INT_VAR LVAR_INT VAR_INT
MULT_FLOAT_LVAR_BY_FLOAT_VAR LVAR_FLOAT VAR_FLOAT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Multiplites the variable on the left by the value on the right.</p>
</div>
</div>
<div class="sect2">
<h3 id="alternator-def-div-thing-by-thing"><a class="anchor" href="#alternator-def-div-thing-by-thing"></a>12.6. DIV_THING_BY_THING</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>DIV_INT_VAR_BY_VAL VAR_INT INT
DIV_FLOAT_VAR_BY_VAL VAR_FLOAT FLOAT
DIV_INT_LVAR_BY_VAL LVAR_INT INT
DIV_FLOAT_LVAR_BY_VAL LVAR_FLOAT FLOAT
DIV_INT_VAR_BY_INT_VAR VAR_INT VAR_INT
DIV_FLOAT_VAR_BY_FLOAT_VAR VAR_FLOAT VAR_FLOAT
DIV_INT_LVAR_BY_INT_LVAR LVAR_INT LVAR_INT
DIV_FLOAT_LVAR_BY_FLOAT_LVAR LVAR_FLOAT LVAR_FLOAT
DIV_INT_VAR_BY_INT_LVAR VAR_INT LVAR_INT
DIV_FLOAT_VAR_BY_FLOAT_LVAR VAR_FLOAT LVAR_FLOAT
DIV_INT_LVAR_BY_INT_VAR LVAR_INT VAR_INT
DIV_FLOAT_LVAR_BY_FLOAT_VAR LVAR_FLOAT VAR_FLOAT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Divides the variable on the left by the value on the right.</p>
</div>
</div>
<div class="sect2">
<h3 id="alternator-def-abs"><a class="anchor" href="#alternator-def-abs"></a>12.7. ABS</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>ABS_VAR_INT VAR_INT
ABS_LVAR_INT LVAR_INT
ABS_VAR_FLOAT VAR_FLOAT
ABS_LVAR_FLOAT LVAR_FLOAT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Computes the absolute value of a variable&#8217;s value and store the result in the same variable.</p>
</div>
</div>
<div class="sect2">
<h3 id="alternator-def-add-thing-to-thing-timed"><a class="anchor" href="#alternator-def-add-thing-to-thing-timed"></a>12.8. ADD_THING_TO_THING_TIMED</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>ADD_TIMED_VAL_TO_FLOAT_VAR VAR_FLOAT FLOAT
ADD_TIMED_VAL_TO_FLOAT_LVAR LVAR_FLOAT FLOAT
ADD_TIMED_FLOAT_VAR_TO_FLOAT_VAR VAR_FLOAT VAR_FLOAT
ADD_TIMED_FLOAT_LVAR_TO_FLOAT_LVAR LVAR_FLOAT LVAR_FLOAT
ADD_TIMED_FLOAT_LVAR_TO_FLOAT_VAR VAR_FLOAT LVAR_FLOAT
ADD_TIMED_FLOAT_VAR_TO_FLOAT_LVAR LVAR_FLOAT VAR_FLOAT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Adds the value on the right multipled by the frame delta time to the variable on the left.</p>
</div>
</div>
<div class="sect2">
<h3 id="alternator-def-sub-thing-from-thing-timed"><a class="anchor" href="#alternator-def-sub-thing-from-thing-timed"></a>12.9. SUB_THING_FROM_THING_TIMED</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>SUB_TIMED_VAL_FROM_FLOAT_VAR VAR_FLOAT FLOAT
SUB_TIMED_VAL_FROM_FLOAT_LVAR LVAR_FLOAT FLOAT
SUB_TIMED_FLOAT_VAR_FROM_FLOAT_VAR VAR_FLOAT VAR_FLOAT
SUB_TIMED_FLOAT_LVAR_FROM_FLOAT_LVAR LVAR_FLOAT LVAR_FLOAT
SUB_TIMED_FLOAT_LVAR_FROM_FLOAT_VAR VAR_FLOAT LVAR_FLOAT
SUB_TIMED_FLOAT_VAR_FROM_FLOAT_LVAR LVAR_FLOAT VAR_FLOAT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Substracts the value on the right multipled by the frame delta time from the variable on the left.</p>
</div>
</div>
<div class="sect2">
<h3 id="alternator-def-is-thing-equal-to-thing"><a class="anchor" href="#alternator-def-is-thing-equal-to-thing"></a>12.10. IS_THING_EQUAL_TO_THING</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>IS_INT_VAR_EQUAL_TO_NUMBER VAR_INT INT
IS_INT_LVAR_EQUAL_TO_NUMBER LVAR_INT INT
IS_INT_VAR_EQUAL_TO_INT_VAR VAR_INT VAR_INT
IS_INT_LVAR_EQUAL_TO_INT_LVAR LVAR_INT LVAR_INT
IS_INT_VAR_EQUAL_TO_INT_LVAR VAR_INT LVAR_INT
IS_FLOAT_VAR_EQUAL_TO_NUMBER VAR_FLOAT FLOAT
IS_FLOAT_LVAR_EQUAL_TO_NUMBER LVAR_FLOAT FLOAT
IS_FLOAT_VAR_EQUAL_TO_FLOAT_VAR VAR_FLOAT VAR_FLOAT
IS_FLOAT_LVAR_EQUAL_TO_FLOAT_LVAR LVAR_FLOAT LVAR_FLOAT
IS_FLOAT_VAR_EQUAL_TO_FLOAT_LVAR VAR_FLOAT LVAR_FLOAT
IS_INT_VAR_EQUAL_TO_CONSTANT VAR_INT INPUT_INT
IS_INT_LVAR_EQUAL_TO_CONSTANT LVAR_INT INPUT_INT
IS_VAR_TEXT_LABEL_EQUAL_TO_TEXT_LABEL VAR_TEXT_LABEL TEXT_LABEL
IS_LVAR_TEXT_LABEL_EQUAL_TO_TEXT_LABEL LVAR_TEXT_LABEL TEXT_LABEL
IS_INT_LVAR_EQUAL_TO_INT_VAR LVAR_INT VAR_INT
IS_FLOAT_LVAR_EQUAL_TO_FLOAT_VAR LVAR_FLOAT VAR_FLOAT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Returns whether the value on the left is equal the value on the right.</p>
</div>
</div>
<div class="sect2">
<h3 id="alternator-def-is-thing-greater-than-thing"><a class="anchor" href="#alternator-def-is-thing-greater-than-thing"></a>12.11. IS_THING_GREATER_THAN_THING</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>IS_INT_VAR_GREATER_THAN_NUMBER VAR_INT INT
IS_INT_LVAR_GREATER_THAN_NUMBER LVAR_INT INT
IS_NUMBER_GREATER_THAN_INT_VAR INT VAR_INT
IS_NUMBER_GREATER_THAN_INT_LVAR INT LVAR_INT
IS_INT_VAR_GREATER_THAN_INT_VAR VAR_INT VAR_INT
IS_INT_LVAR_GREATER_THAN_INT_LVAR LVAR_INT LVAR_INT
IS_INT_VAR_GREATER_THAN_INT_LVAR VAR_INT LVAR_INT
IS_INT_LVAR_GREATER_THAN_INT_VAR LVAR_INT VAR_INT
IS_FLOAT_VAR_GREATER_THAN_NUMBER VAR_FLOAT FLOAT
IS_FLOAT_LVAR_GREATER_THAN_NUMBER LVAR_FLOAT FLOAT
IS_NUMBER_GREATER_THAN_FLOAT_VAR FLOAT VAR_FLOAT
IS_NUMBER_GREATER_THAN_FLOAT_LVAR FLOAT LVAR_FLOAT
IS_FLOAT_VAR_GREATER_THAN_FLOAT_VAR VAR_FLOAT VAR_FLOAT
IS_FLOAT_LVAR_GREATER_THAN_FLOAT_LVAR LVAR_FLOAT LVAR_FLOAT
IS_FLOAT_VAR_GREATER_THAN_FLOAT_LVAR VAR_FLOAT LVAR_FLOAT
IS_FLOAT_LVAR_GREATER_THAN_FLOAT_VAR LVAR_FLOAT VAR_FLOAT
IS_INT_VAR_GREATER_THAN_CONSTANT VAR_INT INPUT_INT
IS_INT_LVAR_GREATER_THAN_CONSTANT LVAR_INT INPUT_INT
IS_CONSTANT_GREATER_THAN_INT_VAR INPUT_INT VAR_INT
IS_CONSTANT_GREATER_THAN_INT_LVAR INPUT_INT LVAR_INT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Returns whether the value on the left is greater than the value on the right.</p>
</div>
</div>
<div class="sect2">
<h3 id="alternator-def-is-thing-greater-or-equal-to-thing"><a class="anchor" href="#alternator-def-is-thing-greater-or-equal-to-thing"></a>12.12. IS_THING_GREATER_OR_EQUAL_TO_THING</h3>
<div class="paragraph">
<p><strong>Alternatives</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>IS_INT_VAR_GREATER_OR_EQUAL_TO_NUMBER VAR_INT INT
IS_INT_LVAR_GREATER_OR_EQUAL_TO_NUMBER LVAR_INT INT
IS_NUMBER_GREATER_OR_EQUAL_TO_INT_VAR INT VAR_INT
IS_NUMBER_GREATER_OR_EQUAL_TO_INT_LVAR INT LVAR_INT
IS_INT_VAR_GREATER_OR_EQUAL_TO_INT_VAR VAR_INT VAR_INT
IS_INT_LVAR_GREATER_OR_EQUAL_TO_INT_LVAR LVAR_INT LVAR_INT
IS_INT_VAR_GREATER_OR_EQUAL_TO_INT_LVAR VAR_INT LVAR_INT
IS_INT_LVAR_GREATER_OR_EQUAL_TO_INT_VAR LVAR_INT VAR_INT
IS_FLOAT_VAR_GREATER_OR_EQUAL_TO_NUMBER VAR_FLOAT FLOAT
IS_FLOAT_LVAR_GREATER_OR_EQUAL_TO_NUMBER LVAR_FLOAT FLOAT
IS_NUMBER_GREATER_OR_EQUAL_TO_FLOAT_VAR FLOAT VAR_FLOAT
IS_NUMBER_GREATER_OR_EQUAL_TO_FLOAT_LVAR FLOAT LVAR_FLOAT
IS_FLOAT_VAR_GREATER_OR_EQUAL_TO_FLOAT_VAR VAR_FLOAT VAR_FLOAT
IS_FLOAT_LVAR_GREATER_OR_EQUAL_TO_FLOAT_LVAR LVAR_FLOAT LVAR_FLOAT
IS_FLOAT_VAR_GREATER_OR_EQUAL_TO_FLOAT_LVAR VAR_FLOAT LVAR_FLOAT
IS_FLOAT_LVAR_GREATER_OR_EQUAL_TO_FLOAT_VAR LVAR_FLOAT VAR_FLOAT
IS_INT_VAR_GREATER_OR_EQUAL_TO_CONSTANT VAR_INT INPUT_INT
IS_INT_LVAR_GREATER_OR_EQUAL_TO_CONSTANT LVAR_INT INPUT_INT
IS_CONSTANT_GREATER_OR_EQUAL_TO_INT_VAR INPUT_INT VAR_INT
IS_CONSTANT_GREATER_OR_EQUAL_TO_INT_LVAR INPUT_INT LVAR_INT</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Side-effects</strong></p>
</div>
<div class="paragraph">
<p>Returns whether the value on the left is greater than or equal to the value on the right.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="grammar"><a class="anchor" href="#grammar"></a>Appendix A: Grammar Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="regular-lexical-grammar"><a class="anchor" href="#regular-lexical-grammar"></a>Appendix B: Regular Lexical Grammar</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre># A Regular Lexical Grammar for GTA3script (informative)
sep := sep ;
eol := eol ;
token := token_char {token_char}
       | '-' (digit | '.') {token_char} ;
string_literal := string_literal ;
plus := '+' ;
minus := '-' ;
star := '*' ;
slash := '/' ;
plus_at := '+@' ;
minus_at := '-@' ;
equal := '=' ;
equal_hash := '=#' ;
plus_equal := '+=' ;
minus_equal := '-=' ;
star_equal := '*=' ;
slash_equal := '/=' ;
plus_equal_at := '+=@' ;
minus_equal_at := '-=@' ;
minus_minus := '--' ;
plus_plus := '++' ;</pre>
</div>
</div>
<div class="paragraph">
<p>There are only operators, separators, unclassified tokens, and string literals.</p>
</div>
<div class="paragraph">
<p>Each unclassified token requires parsing context in order to be classified.</p>
</div>
<div class="paragraph">
<p>Comments are excluded from this grammar because nested block comments are context-free.</p>
</div>
<div class="paragraph">
<p>This regular grammar is not capable of handling the complete set of words generated by <code>filename</code>. For instance, <code>file-name.sc</code> would not be interpreted properly. A translator should be careful to handle this case properly.</p>
</div>
<div class="paragraph">
<p>The following are examples of context dependency for token classification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// for the sake of simplicity separation tokens are omitted.

WORD: WORD:    // label(WORD:) command(WORD:)

WORD WORD      // command(WORD) identifier(WORD)

1234 1234      // command(1234) integer(1234)

X = Y          // identifier(X) '=' identifier(Y)
X Y            // command(X) identifier(Y)

X --           // identifier(X) '--'
X -1           // command(X) integer(-1)

LAUNCH_MISSION a.sc // command(LAUNCH_MISSION) filename(a.sc)
OTHER_COMMAND a.sc  // command(OTHER_COMMAND) identifier(a.sc)
// NOTE: filename is not an identifier because, for instance,
// filename(4x4.sc) cannot be classified as an identifier.

OR             // command(OR)
NOT            // command(NOT)
IF SOMETHING   //
OR OR          // 'OR' command(OR)
OR NOT NOT     // 'OR' 'NOT' command(NOT)
    NOP        //
ENDIF          //

// NOTE: that is a defect actually, see following example:
IF SOMETHING
    AND var    // 'AND' command(var) -- not what we want
    // same problem for OR.
    // NOT is affected by IF NOT var.
ENDIF</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ambiguity"><a class="anchor" href="#ambiguity"></a>Appendix C: Ambiguity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Not only the language, but the grammar presented in this document is ambiguous. Here are all the instances of ambiguity, which is the correct derivation, and suggestions to avoid users getting trapped in them.</p>
</div>
<div class="sect2">
<h3 id="if-goto"><a class="anchor" href="#if-goto"></a>C.1. IF GOTO</h3>
<div class="listingblock">
<div class="content">
<pre>IF COMMAND goto other
COMMAND goto other</pre>
</div>
</div>
<div class="paragraph">
<p>The first line could mean an command, taking two arguments, <code>goto</code> and <code>other</code>. Or, it could mean that if the command returns true, a jump should be performed into the <code>other</code> label. The correct interpretation is the latter.</p>
</div>
<div class="paragraph">
<p>The second line is unambiguous due to context.</p>
</div>
<div class="paragraph">
<p>We suggest an implementation to emit an warnings to declarations of names and the use of text labels equal to <code>goto</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ternary-minus-one"><a class="anchor" href="#ternary-minus-one"></a>C.2. Ternary Minus One</h3>
<div class="listingblock">
<div class="content">
<pre>x = 1-1
x = 1 -1
x = 1 - 1
x = 1--1
x = 1- -1</pre>
</div>
</div>
<div class="paragraph">
<p>The first line could mean <code>1</code> minus <code>1</code>, or it could mean <code>1</code> and then the number <code>-1</code>. The latter is the correct interpretation. And yes, it is a syntax error.</p>
</div>
<div class="paragraph">
<p>The second line has the same ambiguity and its interpretation should be the same as the first line.</p>
</div>
<div class="paragraph">
<p>The third line is not ambiguous.</p>
</div>
<div class="paragraph">
<p>The fourth line is ambiguous. Its actual meaning is <code>1</code> followed by the unary operator <code>--</code> and it is a syntax error.</p>
</div>
<div class="paragraph">
<p>The fifth line is not ambiguous.</p>
</div>
<div class="paragraph">
<p>The token stream produced by the regular lexical grammar in <a href="#regular-lexical-grammar">Appendix B</a> should solve this issue naturally.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-to-miss2"><a class="anchor" href="#how-to-miss2"></a>Appendix D: How to MISS2</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The leaked script compiler is full of bugs. It was written for in-house use, so it&#8217;s meant to work and recognize at least the intended language. The problem is, the language is too inconsistent in this buggy superset. After constantly trying to make those bugs part of this specification, I strongly believe we shouldn&#8217;t. For the conservative, the following is a list of known things miss2 accepts that this specification does not.</p>
</div>
<div class="paragraph">
<p>Do note a regular lexical grammar (like above) cannot be built for the language recognized by miss2.</p>
</div>
<div class="paragraph">
<p><strong>Unrestricted character set</strong></p>
</div>
<div class="paragraph">
<p>More control codes than the specified are <em>accepted</em> by miss2 (such as <code>\r</code> anywhere or <code>\v</code>). The compiler behaves in weird ways when those are used.</p>
</div>
<div class="paragraph">
<p>You may use custom characters (c &gt; 127), but you may clash with the characters DMA used to tokenize string literals.</p>
</div>
<div class="paragraph">
<p><strong>A string literal is the same as four tokens</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>SAVE_STRING_TO_DEBUG_FILE "OO AR AZ WERTY"
SAVE_STRING_TO_DEBUG_FILE FOO BAR BAZ QWERTY
// both are recognized by miss2 and produce the same bytecode
// this specification only accepts the string literal one</pre>
</div>
</div>
<div class="paragraph">
<p><strong>A string literal ends a line</strong></p>
</div>
<div class="paragraph">
<p>As part of transforming a string literal into tokens, miss2 puts a null terminator in the line. Thus, any argument following it is kinda of ignored.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SAVE_STRING_TO_DEBUG_FILE "this is a string" and this is ignored
// this specification does not accept this</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Accepts internal compiler commands</strong></p>
</div>
<div class="paragraph">
<p>Remove the constraint that commands that conflict with grammar definitions cannot be used in a <code>command_statement</code> and you get atrocities like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>IF { // does not begin a lexical scope
ENDIF

IF WHILE 0 // it's like an ANDOR within an ANDOR
ENDIF

// there is probably a lot more of these</pre>
</div>
</div>
<div class="paragraph">
<p><strong>WHILENOT is incomplete</strong></p>
</div>
<div class="paragraph">
<p>WHILENOT only accepts equality comparison</p>
</div>
<div class="listingblock">
<div class="content">
<pre>WHILENOT x = 1
ENDWHILE

WHILENOT x &lt; 1 // not recognized
ENDWHILE

// since we accept the above, we are not a subset anymore.
// to fix this (and become a subset again) only allow equality
// on WHILENOT.</pre>
</div>
</div>
<div class="paragraph">
<p><strong>AND/OR behaves differently than IF/WHILE/expressions</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>WHILENOT x &lt; 1 // not recognized
AND x &lt; 1      // recognized
ENDWHILE
// this specification accepts both

WHILE WAIT 1-1 // not recognized
AND WAIT 1-1   // recognized
// this specification accepts neither

WHILE WAIT-1   // the command WAIT with a -1 argument
AND WAIT-1     // a command named WAIT-1
// this specification accepts neither</pre>
</div>
</div>
<div class="paragraph">
<p><strong>INT tokens allow minus in the middle</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>WAIT 1-1
WAIT 1-
// this specification does not accept this</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Commands may have operator characters</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>--b   // recognized as '--' identifier(b)
--b b // recognized as command(--b) identifier(b)
// this makes the lexer context sensitive
// but this spec disallow the later form based
// on the belief the IF/WHILE/expressions parser
// is the correct one (details above).</pre>
</div>
</div>
<div class="paragraph">
<p><strong>anything may follow MISSION_START</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>MISSION_START anythin"may follow" this thing
MISSION_END the same "happens"with mission_end
// this specification does not accept this</pre>
</div>
</div>
<div class="paragraph">
<p><strong>labels may contain any printable character (except quotation marks)</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>e-=1:                  // recognized (we don't accept this)
GOTO e-=1              // not recognized
LAUNCH_MISSION e/=.sc  // recognized (we don't accept this)</pre>
</div>
</div>
<div class="paragraph">
<p><strong>label may be empty or not match identifier</strong></p>
</div>
<div class="paragraph">
<p>The name of a label may be empty. The name of a label may contain characters that do not match the <code>identifier</code> production.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>:     // recognized
::::  // recognized
@abc: // recognized
// this specification does not accept this</pre>
</div>
</div>
<div class="paragraph">
<p><strong>non-identifiers on the lhs of assignment expressions</strong></p>
</div>
<div class="paragraph">
<p>Some expressions implement this correctly in miss2, some don&#8217;t.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1 = ABS 2 // recognized
--1       // recognized for every unary expression
1 = 2 * 3 // recognized for every ternary expression
1 = 2     // recognized
1 =# 2    // recognized
1 *= 2    // not recognized for every other binary expression
// this specification does not accept any of this</pre>
</div>
</div>
<div class="paragraph">
<p><strong>labels in AND/OR</strong></p>
</div>
<div class="paragraph">
<p>miss2 allows labels to prefix AND/OR conditions. However, it produces weird code. As such, this specification does not accept it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>IF x = 0
lab_or: OR x = 1 // goes to the WAIT 0 after the last condition
OR x = 2         // this specification does not accept this
    WAIT 1
ELSE
    WAIT 2
ENDIF</pre>
</div>
</div>
<div class="paragraph">
<p><strong>weird closing blocks</strong></p>
</div>
<div class="paragraph">
<p>stuff like the following is recognized by miss2</p>
</div>
<div class="listingblock">
<div class="content">
<pre>WHILE x = 0
    IF y = 1
        WAIT 0
ENDWHILE
    ENDIF
// this specification does not accept this (nor variations of this)</pre>
</div>
</div>
<div class="paragraph">
<p>this happens with scopes, IFs, REPEATs, WHILEs, <code>MISSION_END</code>, and what not.</p>
</div>
<div class="paragraph">
<p>it is very interesting actually, but clearly a language bug (would not say a implementation bug though).</p>
</div>
<div class="paragraph">
<p><strong>exclusive scripts</strong></p>
</div>
<div class="paragraph">
<p>we don&#8217;t really what are these, so we won&#8217;t specify them.</p>
</div>
<div class="paragraph">
<p><strong>entities</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>VAR_INT vcar
COMMAND_INPUT_CAR_OUTPUT_CAR vcar vcar
// this spec gives an error, miss2 recognizes (does not look like intended behaviour?)
// [...] we are not a subset anymore because of this.</pre>
</div>
</div>
<div class="paragraph">
<p><strong>arrays</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>WAIT array[1]anything // recognized
WAIT non_array[1]     // recognized
WAIT non_array[2]     // not recognized
// this specification does not accept this</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references"><a class="anchor" href="#references"></a>References</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="itvocabulary"></a>[ISO/IEC 2382:2015] <a href="https://www.iso.org/standard/63598.html">Information technology&#8201;&#8212;&#8201;Vocabulary</a>.</p>
</li>
<li>
<p><a id="ebnf"></a>[ISO/IEC 14977:1996] <a href="https://www.iso.org/standard/26153.html">Information technology&#8201;&#8212;&#8201;Syntactic metalanguage&#8201;&#8212;&#8201;Extended BNF</a>.</p>
</li>
<li>
<p><a id="ascii"></a>[ISO 646:1991 IRV] <a href="https://www.iso.org/standard/4777.html">Information technology&#8201;&#8212;&#8201;ISO 7-bit coded character set for information interchange</a>.</p>
</li>
<li>
<p><a href="http://gtamp.com/GTA2/gta2script.7z">Official GTA2script Compiler V9.6</a> by DMA Design.</p>
</li>
<li>
<p><a href="https://public.thelink2012.xyz/gta3/GTA2%20Scripting.html">Official GTA2script Scripting Information</a> by DMA Design.</p>
</li>
<li>
<p><a href="https://www.dropbox.com/s/7xgvqo8b9u1qw02/gta3sc_v413.rar">Official GTA3 Script Compiler V413</a> by Rockstar North.</p>
</li>
<li>
<p><a href="https://public.thelink2012.xyz/gta3/gta3_main_source.7z">GTA III 10th Anniversary Multiscripts Source Code</a> by Rockstar North, War Drum Studios.</p>
</li>
<li>
<p><a href="http://pastebin.com/raw/Pjb0Ezkx">GTA3 Script Compiler V413 Strings</a> organized by Wesser.</p>
</li>
<li>
<p><a href="https://www.dropbox.com/s/zkn59hrw7o76ry7/gta3vc_sc_defines.rar">GTA3 Script Compiler V413 Definitions</a> organized by Wesser.</p>
</li>
<li>
<p><a href="https://pastebin.com/raw/2VczpwK7">GTASA Mobile Symbol Listing</a> organized by LINK/2012.</p>
</li>
<li>
<p><a href="http://pastebin.com/raw/YfLWLXJw">Work-In-Progress SCM Language Article</a> by Wesser.</p>
</li>
<li>
<p><a href="http://web.archive.org/web/20170111193059/http://www.gtamodding.com/wiki/GTA3script">Ancient SCM Language Article</a> by Wesser.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>TODO should we fix the floating point literals (e.g. '1.9.2')? I think there are DMA scripts that need this.
TODO list of special command names (user cannot write these, include AND/OR/NOT)
TODO label semantics of start new script (GTA3 allows label: {})
TODO SAN ANDREAS ALLOWS IDENTIFIERS TO BEGIN WITH UNDERSCORES
TODO remember GTASA INPUT_OPT does not accept text label vars at all (not at runtime level)
TODO timera timerb (remember, only within scope; cannot declare var with same name; global shall not be named timera/timerb)
TODO interesting NOP is not compiled
TODO creating packages and such are declarations too (not only var decls)
TODO translation limits
LIMITS
TODO gxtsema gxt key length &lt;8
TODO gxtsema filename (excluding extension must be) &lt;16
TODO label name &lt;=38
TODO varname &lt;40
TODO scriptname &lt;=7
TODO scriptnames &lt;= 300
TODO &lt;=9216 gvar storage words
TODO &lt;=16 lvars storage words
TODO &lt;=255 array size
TODO &lt;=35000 label refs
TODO &lt;=255 line
TODO &lt;=127 string</p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. For consistency we have simplified this feature. Please refer to <a href="#how-to-miss2">Appendix D</a> for details on how the in-house compiler behaves.
</div>
</div>
</body>
</html>